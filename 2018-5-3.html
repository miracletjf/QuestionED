<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<button id="btna" onclick="operate()">点击</button>

<script>
  $.ajax = (function (_ajax) {
    var queue = [], idle = true;

    function run() {
      if (idle && queue.length !== 0) {
        var options = queue.shift();
        idle = false;
        var originalSuccess = options.success, originalError = options.error;
        options.success = function (data, textStatus, jqXhr) {
          originalSuccess.apply(this, arguments);
          next();
        };
        options.error = function (data, textStatus, jqXhr) {
          originalError.apply(this, arguments);
          next();
        };
        _ajax(options);
      }
    }

    function next() {
      idle = true;
      run();
    }

    return function (url, options) {
      if (typeof url === "object") {
        options = url;
        url = undefined;
      } else {
        options.url = url;
      }
      queue.push(options);
      run();
    };
  })($,ajax);
  
  function operate(){
    $ajax('6666',{
      success : function () {
        console.log(1);
      }
    });
    
    $ajax('7777',{
      success: function () {
        console.log(2);
      }
    });
  }
  
</script>
</body>
</html>